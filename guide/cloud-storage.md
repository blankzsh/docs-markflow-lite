# 云存储

MarkFlow Lite 支持多种存储方式，让你可以灵活地管理和同步文档。

## 💾 存储方式概览

### 1. 本地存储（默认）
- **浏览器本地存储**：自动保存到浏览器本地存储
- **优点**：无需配置，开箱即用，隐私性好
- **缺点**：受浏览器限制，容量有限，无法跨设备同步

### 2. AWS S3 存储
- **Amazon S3**：连接到 AWS S3 存储桶
- **优点**：高可靠性，全球访问，大容量
- **缺点**：需要 AWS 账户，可能产生费用

### 3. WebDAV 存储
- **WebDAV 服务器**：连接到任何支持 WebDAV 的服务器
- **优点**：协议标准化，支持多种服务器
- **缺点**：需要 WebDAV 服务器，配置相对复杂

## 🔧 配置本地存储

本地存储是默认选项，无需额外配置：

1. 编辑文档时自动保存
2. 每 30 秒自动保存一次
3. 浏览器关闭前保存当前状态
4. 重新打开时恢复上次编辑的内容

## ☁️ 配置 AWS S3

### 前提条件

- AWS 账户
- 创建 S3 存储桶
- 创建 IAM 用户并获取访问密钥

### 配置步骤

1. **获取 AWS 凭证**
   ```
   Access Key ID: AKIAIOSFODNN7EXAMPLE
   Secret Access Key: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
   ```

2. **在 MarkFlow Lite 中配置**
   - 点击「文件」→「云存储设置」
   - 选择「AWS S3」
   - 输入以下信息：
     - 访问密钥 ID
     - 秘密访问密钥
     - S3 存储桶名称
     - AWS 区域（如：us-west-2）

3. **测试连接**
   - 点击「测试连接」按钮
   - 验证配置是否正确
   - 保存配置

### S3 权限配置

确保 IAM 用户具有以下权限：

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "s3:GetObject",
                "s3:PutObject",
                "s3:DeleteObject",
                "s3:ListBucket"
            ],
            "Resource": [
                "arn:aws:s3:::your-bucket-name",
                "arn:aws:s3:::your-bucket-name/*"
            ]
        }
    ]
}
```

## 🌐 配置 WebDAV

### 支持的 WebDAV 服务器

- **Nextcloud**
- **ownCloud**
- **Apache WebDAV**
- **Nginx WebDAV**
- **其他 WebDAV 兼容服务器**

### 配置步骤

1. **准备 WebDAV 服务器信息**
   ```
   服务器地址: https://your-webdav-server.com/remote.php/webdav/
   用户名: your-username
   密码: your-password
   ```

2. **在 MarkFlow Lite 中配置**
   - 点击「文件」→「云存储设置」
   - 选择「WebDAV」
   - 输入服务器地址、用户名和密码
   - 点击「测试连接」
   - 保存配置

### Nextcloud 配置示例

```
服务器地址: https://your-nextcloud.com/remote.php/webdav/
用户名: your-nextcloud-username
密码: your-app-password
```

**注意**：Nextcloud 需要使用应用密码而不是登录密码。

## 📁 文件管理操作

### 连接云存储

1. 打开「文件资源管理器」
2. 点击「连接云存储」
3. 选择已配置的存储方式
4. 输入必要的认证信息
5. 连接成功后浏览远程文件

### 基本操作

| 操作 | 说明 |
|------|------|
| **浏览** | 查看文件夹结构，导航到目标位置 |
| **新建文件** | 在远程创建新的 Markdown 文件 |
| **打开文件** | 从远程打开文件到编辑器 |
| **保存文件** | 将当前文件保存到远程 |
| **删除文件** | 删除远程文件 |
| **重命名** | 重命名远程文件 |
| **刷新** | 刷新文件列表 |

### 文件同步

MarkFlow Lite 提供智能的文件同步功能：

1. **自动同步**：保存时自动同步到云存储
2. **手动同步**：点击「同步」按钮手动同步
3. **冲突解决**：当本地和远程都有修改时，提供冲突解决选项

## 🔒 安全和隐私

### 数据安全

- **本地加密**：敏感数据在本地进行加密
- **传输加密**：使用 HTTPS 进行数据传输
- **访问控制**：支持细粒度的权限控制

### 隐私保护

- **本地存储**：数据保存在本地，不上传到第三方
- **云存储选择**：用户自主选择云存储服务
- **数据所有权**：用户完全拥有自己的数据

### 最佳实践

1. **使用强密码**：为云存储账户设置强密码
2. **定期备份**：定期备份重要文档
3. **权限管理**：合理设置文件和文件夹权限
4. **安全连接**：始终使用 HTTPS 连接

## 🐛 常见问题

### 连接失败

1. **检查网络连接**：确保网络连接正常
2. **验证凭证**：检查访问密钥和密码是否正确
3. **检查权限**：确保有足够的权限访问存储
4. **查看日志**：检查控制台日志获取详细信息

### 同步失败

1. **文件冲突**：检查是否有版本冲突
2. **存储空间**：检查云存储空间是否已满
3. **文件大小**：检查文件大小是否超出限制
4. **网络超时**：检查网络连接是否稳定

### 性能优化

1. **增量同步**：只同步修改的部分
2. **压缩传输**：启用数据压缩
3. **缓存策略**：合理设置缓存策略
4. **并发控制**：限制并发操作数量

## 🎯 下一步

- [导出功能](./export) - 学习如何导出文档
- [功能特性](../features/) - 了解所有功能特性
- [快捷键](../features/shortcuts) - 掌握高效操作技巧

## 📚 相关资源

- [AWS S3 文档](https://docs.aws.amazon.com/s3/)
- [WebDAV 协议规范](https://tools.ietf.org/html/rfc4918)
- [Nextcloud 文档](https://docs.nextcloud.com/)
- [ownCloud 文档](https://doc.owncloud.com/)\